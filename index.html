<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>Banditi - Team Stats</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body {
    background-color: #1f1f2e;
    color: #f0f0f0;
    font-family: 'Segoe UI', sans-serif;
    padding: 20px;
  }
  .header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
    margin-bottom: 20px;
  }
  .header img {
    height: 60px;
    user-select: none;
  }
  .header h1 {
    color: #00ffc8;
    margin: 0;
    font-size: 2.2em;
  }
  .nav {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 25px;
  }
  .nav button {
    background-color: #00ffc8;
    color: #1f1f2e;
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
  }
  .nav button:hover {
    background-color: #00d1a8;
  }
  .section {
    display: none;
  }
  .section.active {
    display: block;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    background-color: #2a2a3d;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 0 15px rgba(0,0,0,0.5);
    margin-bottom: 10px;
  }
  th, td {
    padding: 12px 18px;
    text-align: center;
    border-bottom: 1px solid #3c3c50;
  }
  th {
    background-color: #34344a;
    color: #00ffc8;
    font-weight: bold;
  }
  tr:nth-child(even) {
    background-color: #262636;
  }
  tr:hover {
    background-color: #3a3a56;
  }
  td[contenteditable="true"] {
    cursor: text;
    background-color: #3a3a56;
  }
  .tables-container {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
  }
  .table-wrapper {
    flex: 1;
    min-width: 300px;
  }
  .chart-wrapper {
    flex: 1;
    min-width: 300px;
  }
  .update-info {
    font-size: 0.8em;
    color: #00ffc8;
    text-align: right;
    margin-bottom: 10px;
  }
  .limits {
    background-color: #2a2a3d;
    padding: 15px;
    border-radius: 10px;
    margin-bottom: 20px;
  }
  .limits h2 {
    color: #00ffc8;
    margin-top: 0;
  }
  .limits ul {
    columns: 2;
    padding-left: 20px;
  }
  .limits li {
    margin-bottom: 5px;
  }
  #guildInfo {
    width: 100%;
    min-height: 500px;
    background-color: #2a2a3d;
    color: #f0f0f0;
    border: 1px solid #3c3c50;
    border-radius: 10px;
    padding: 15px;
    font-family: 'Segoe UI', sans-serif;
    resize: vertical;
  }
  .edit-icon {
    cursor: pointer;
    color: #00ffc8;
    margin-left: 10px;
    font-size: 0.8em;
  }
  .add-player {
    background-color: #00ffc8;
    color: #1f1f2e;
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    margin-bottom: 20px;
  }
  .add-player:hover {
    background-color: #00d1a8;
  }
  .update-btn {
    background-color: #00ffc8;
    color: #1f1f2e;
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    margin-bottom: 10px;
  }
  .update-btn:hover {
    background-color: #00d1a8;
  }
  .workshop-status {
    font-weight: bold;
  }
  canvas {
    width: 100% !important;
    height: 400px !important;
  }
  .history-section {
    margin-top: 10px;
    margin-bottom: 30px;
  }
</style>
</head>
<body>

<div class="header">
  <img src="logo.png" alt="Logo">
  <h1>Banditi - Team Stats</h1>
</div>

<div class="nav">
  <button onclick="showSection('guild')">üè∞ Guild Info</button>
  <button onclick="showSection('players')">üë• Players Info</button>
  <button onclick="showSection('xp')">üìà XP Tournament</button>
  <button onclick="showSection('herocon')">‚öîÔ∏è HeroCon Tournament</button>
</div>

<div id="guild" class="section">
  <h2>Guild Info <span class="edit-icon" onclick="requestEditAccess()">‚úèÔ∏è</span></h2>
  <textarea id="guildInfo" readonly>
Casino: 

Casino with high quality rewards
2025-07-02 00:00:00 - 2025-07-05 23:59:59

"Chic Hero Hideout" Casino
2025-07-08 00:00:00 - 2025-07-13 23:59:59

Casino with high quality rewards
2025-07-18 00:00:00 - 2025-07-21 23:59:59

Casino without Coins or Experience Points, but with higher chance of all other prizes
2025-07-25 00:00:00 - 2025-07-28 23:59:59


Bonus Days:

Double Coins from Missions
2025-07-02 00:00:00 - 2025-07-05 23:59:59

Double Energy for Missions
2025-07-18 00:00:00 - 2025-07-21 23:59:59

Double Motivation Units
2025-07-26 00:00:00 - 2025-07-28 23:59:59


Events:

Summer Begins
2025-06-21 00:00:00 - 2025-09-21 23:59:59

Supervillain Lair: Dr. Wireless
2025-06-30 00:00:00 - 2025-07-05 23:59:59

Collection Event: The Secret Recipe
2025-07-01 00:00:00 - 2025-07-07 23:59:59

Lucky Pyramid: Country Livin'
2025-07-05 00:00:00 - 2025-07-07 23:59:59

Collection Event: The fiiinaaal! Wooohooooo!
2025-07-10 00:00:00 - 2025-07-13 23:59:59

Mole Hunt: Fire
2025-07-12 00:00:00 - 2025-07-14 23:59:59

Collection Event: The Solar Soapbox Derby
2025-07-14 00:00:00 - 2025-07-21 23:59:59

Mole Hunt: Retro Delights
2025-07-19 00:00:00 - 2025-07-22 23:59:59

Lucky Pyramid: Aliens
2025-07-22 00:00:00 - 2025-07-24 23:59:59

System Administrator Day
2025-07-25 00:00:00 - 2025-07-25 23:59:59

System Administrator Bonus Days
2025-07-26 00:00:00 - 2025-07-28 23:59:59

Collection Event: The International Hero Championships
2025-07-30 00:00:00 - 2025-08-06 23:59:59


HeroCons:

2025-07-03 21:00:00 Modifications produced at your Hero Hideout
2025-07-10 21:00:00 Attacks on villains
2025-07-17 21:00:00 Missions completed
2025-07-24 21:00:00 Special Missions Won


Villains:

2025-07-01 15:30:00 Nasty Burglar Duo
2025-07-02 06:00:00 The Joker
2025-07-02 19:45:00 Nasty Burglar Duo
2025-07-03 20:00:00 The Joker
2025-07-04 16:30:00 Boorish Rocker Rowdy
2025-07-05 07:45:00 Nasty Burglar Duo
2025-07-05 19:00:00 C3-D2
2025-07-06 02:15:00 The Joker
2025-07-06 16:15:00 Boorish Rocker Rowdy
2025-07-07 02:15:00 General Bombman
2025-07-08 00:30:00 The Joker
2025-07-08 20:00:00 Pompous Salesman
2025-07-09 04:00:00 C3-D2
2025-07-09 18:15:00 Nasty Burglar Duo
2025-07-10 05:30:00 The Joker
2025-07-10 15:15:00 The Avenging Avenger
2025-07-11 10:00:00 General Bombman
2025-07-11 15:30:00 Boorish Rocker Rowdy
2025-07-12 14:00:00 Ice Cold Real Estate Shark
2025-07-12 20:00:00 Nasty Burglar Duo
2025-07-13 06:30:00 C3-D2
2025-07-13 20:00:00 The Avenging Avenger
2025-07-14 07:00:00 Pompous Salesman
2025-07-14 20:00:00 The Quantum Physicist
2025-07-15 07:45:00 Ice Cold Real Estate Shark
2025-07-15 16:45:00 Pompous Salesman
2025-07-16 05:15:00 Nasty Burglar Duo
2025-07-17 04:45:00 Boorish Rocker Rowdy
2025-07-17 16:30:00 General Bombman
2025-07-18 08:00:00 The Avenging Avenger
2025-07-19 11:30:00 The Joker
2025-07-20 00:30:00 Pompous Salesman
2025-07-20 09:45:00 The Quantum Physicist
2025-07-21 07:00:00 Nasty Burglar Duo
2025-07-22 10:45:00 Ice Cold Real Estate Shark
2025-07-23 05:15:00 General Bombman
2025-07-24 04:00:00 The Joker
2025-07-25 03:30:00 The Avenging Avenger
2025-07-25 17:45:00 The Quantum Physicist
2025-07-26 06:00:00 Nasty Burglar Duo
2025-07-26 20:00:00 Pompous Salesman
2025-07-27 05:00:00 The Joker
2025-07-27 15:30:00 Ice Cold Real Estate Shark
2025-07-28 17:45:00 The Joker
2025-07-29 04:15:00 The Quantum Physicist
2025-07-29 20:00:00 Boorish Rocker Rowdy
2025-07-30 09:30:00 Pompous Salesman
2025-07-30 16:15:00 The Avenging Avenger
2025-07-31 03:15:00 Nasty Burglar Duo
2025-07-31 10:45:00 The Quantum Physicist
2025-07-31 15:30:00 Ice Cold Real Estate Shark
  </textarea>
</div>

<div id="players" class="section">
  <h2>Players Info <span class="edit-icon" onclick="requestEditAccess()">‚úèÔ∏è</span></h2>
  
  <div class="limits">
    <h2>Limity d√≠lny podle levelu:</h2>
    <ul>
        <li>Lvl 500+ ‚Üí D√≠lna 20</li>
        <li>Lvl 450+ ‚Üí D√≠lna 19</li>
        <li>Lvl 400+ ‚Üí D√≠lna 18</li>
        <li>Lvl 350+ ‚Üí D√≠lna 17</li>
        <li>Lvl 325+ ‚Üí D√≠lna 16</li>
        <li>Lvl 300+ ‚Üí D√≠lna 15</li>
        <li>Lvl 275+ ‚Üí D√≠lna 14</li>
        <li>Lvl 250+ ‚Üí D√≠lna 13</li>
        <li>Lvl 230+ ‚Üí D√≠lna 12</li>
        <li>Lvl 210+ ‚Üí D√≠lna 11</li>
        <li>Lvl 190+ ‚Üí D√≠lna 10</li>
        <li>Lvl 170+ ‚Üí D√≠lna 9</li>
        <li>Lvl 150+ ‚Üí D√≠lna 8</li>
        <li>Lvl 100+ ‚Üí D√≠lna 7</li>
    </ul>
  </div>
  
  <button class="add-player" onclick="addPlayerRow('playersBody')">‚ûï Add Player</button>
  
  <table>
    <thead>
      <tr>
        <th>Nickname</th>
        <th>Level</th>
        <th>Workshop Level</th>
        <th>Workshop Status</th>
        <th>Vynechan√© boje</th>
      </tr>
    </thead>
    <tbody id="playersBody">
    </tbody>
  </table>
  
  <div class="history-section">
    <button class="update-btn" onclick="exportTableToPDF('players')">üíæ Ulo≈æit Players do PDF</button>
  </div>
</div>

<div id="xp" class="section">
  <h2>XP Tournament <span class="edit-icon" onclick="requestEditAccess()">‚úèÔ∏è</span></h2>
  
  <button class="update-btn" onclick="updateTournament('xp')">üîÑ Aktualizovat</button>
  <button class="add-player" onclick="addPlayerRow('xpBody')">‚ûï Add Player</button>
  
  <div class="tables-container">
    <div class="table-wrapper">
      <div class="update-info">Last updated: <span id="xpUpdateDate"></span></div>
      <table>
        <thead>
          <tr>
            <th contenteditable="true">Rank</th>
            <th contenteditable="true">Name</th>
            <th contenteditable="true">XP Gained</th>
          </tr>
        </thead>
        <tbody id="xpBody">
          <tr><td>1</td><td>Alfa</td><td>1230</td></tr>
          <tr><td>2</td><td>Sazaro</td><td>980</td></tr>
          <tr><td>3</td><td>Bandita</td><td>840</td></tr>
        </tbody>
      </table>
      <div class="history-section">
        <button class="update-btn" onclick="exportTableToPDF('xp')">üíæ Ulo≈æit XP Tournament do PDF</button>
      </div>
    </div>
    <div class="chart-wrapper">
      <canvas id="xpChart"></canvas>
    </div>
  </div>
</div>

<div id="herocon" class="section">
  <h2>HeroCon Tournament <span class="edit-icon" onclick="requestEditAccess()">‚úèÔ∏è</span></h2>
  
  <button class="update-btn" onclick="updateTournament('herocon')">üîÑ Aktualizovat</button>
  <button class="add-player" onclick="addPlayerRow('heroconBody')">‚ûï Add Player</button>
  
  <div class="tables-container">
    <div class="table-wrapper">
      <div class="update-info">Last updated: <span id="heroconUpdateDate"></span></div>
      <table>
        <thead>
          <tr>
            <th contenteditable="true">Rank</th>
            <th contenteditable="true">Name</th>
            <th contenteditable="true">HeroCon Score</th>
          </tr>
        </thead>
        <tbody id="heroconBody">
          <tr><td>1</td><td>Alfa</td><td>1050</td></tr>
          <tr><td>2</td><td>Liones</td><td>970</td></tr>
          <tr><td>3</td><td>Bandita</td><td>910</td></tr>
        </tbody>
      </table>
      <div class="history-section">
        <button class="update-btn" onclick="exportTableToPDF('herocon')">üíæ Ulo≈æit HeroCon Tournament do PDF</button>
      </div>
    </div>
    <div class="chart-wrapper">
      <canvas id="heroconChart"></canvas>
    </div>
  </div>
</div>

<script>
const limits = [
  { level: 500, workshop: 20 },
  { level: 450, workshop: 19 },
  { level: 400, workshop: 18 },
  { level: 350, workshop: 17 },
  { level: 325, workshop: 16 },
  { level: 300, workshop: 15 },
  { level: 275, workshop: 14 },
  { level: 250, workshop: 13 },
  { level: 230, workshop: 12 },
  { level: 210, workshop: 11 },
  { level: 190, workshop: 10 },
  { level: 170, workshop: 9 },
  { level: 150, workshop: 8 },
  { level: 100, workshop: 7 }
];

function showSection(name) {
  document.querySelectorAll('.section').forEach(sec => {
    sec.classList.remove('active');
  });
  document.getElementById(name).classList.add('active');
}

// Inicialnƒõ zobraz√≠me players sekci
showSection('players');

function addPlayerRow(tbodyId) {
  const tbody = document.getElementById(tbodyId);
  const row = document.createElement('tr');
  
  if(tbodyId === 'playersBody') {
    row.innerHTML = `
      <td contenteditable="true">NewPlayer</td>
      <td contenteditable="true">100</td>
      <td contenteditable="true">7</td>
      <td class="workshop-status"></td>
      <td contenteditable="true">0</td>
    `;
  } else {
    // XP and HeroCon tables: rank, name, score
    row.innerHTML = `
      <td contenteditable="true">0</td>
      <td contenteditable="true">NewPlayer</td>
      <td contenteditable="true">0</td>
    `;
  }
  
  tbody.appendChild(row);
  if(tbodyId === 'playersBody') updateWorkshopStatusRow(row);
}

function updateWorkshopStatusRow(row) {
  const levelCell = row.cells[1];
  const workshopCell = row.cells[2];
  const statusCell = row.cells[3];

  let lvl = parseInt(levelCell.textContent) || 0;
  let workshopLvl = parseInt(workshopCell.textContent) || 0;

  // Najdi po≈æadovan√Ω workshop level podle levelu
  let requiredWorkshop = 0;
  for (const limit of limits) {
    if (lvl >= limit.level) {
      requiredWorkshop = limit.workshop;
      break;
    }
  }

  let diff = workshopLvl - requiredWorkshop;

  if (diff === 1) {
    statusCell.textContent = '+1';
    statusCell.style.color = '#0099ff';  // modr√°
  } else if (diff === 0) {
    statusCell.textContent = 'OK';
    statusCell.style.color = '#00ff90';  // zelen√°
  } else if (diff === -1) {
    statusCell.textContent = '-1';
    statusCell.style.color = '#ff5050';  // ƒçerven√°
  } else {
    statusCell.textContent = '-1';
    statusCell.style.color = '#ff5050';
  }
}

function updateAllWorkshopStatuses() {
  const tbody = document.getElementById('playersBody');
  for (const row of tbody.rows) {
    updateWorkshopStatusRow(row);
  }
}

document.getElementById('playersBody').addEventListener('input', e => {
  if(e.target.tagName === 'TD') {
    // Aktualizuj workshop status jen pokud je zmƒõnƒõn level nebo workshop level
    const cellIndex = e.target.cellIndex;
    if(cellIndex === 1 || cellIndex === 2) {
      const row = e.target.parentElement;
      updateWorkshopStatusRow(row);
    }
  }
});

// Inicializace workshop status u existuj√≠c√≠ch hr√°ƒç≈Ø (pokud nƒõjak√© m√°≈°)
window.onload = () => {
  updateAllWorkshopStatuses();
  showSection('players');
}

// --- XP Tournament a HeroCon Tournament ---

function updateTournament(type) {
  const tbody = document.getElementById(type + 'Body');
  const rows = Array.from(tbody.rows);

  // Se≈ôadit podle sk√≥re sestupnƒõ (3. sloupec)
  rows.sort((a,b) => {
    const scoreA = parseInt(a.cells[2].textContent) || 0;
    const scoreB = parseInt(b.cells[2].textContent) || 0;
    return scoreB - scoreA;
  });

  // Aktualizovat po≈ôad√≠ (rank)
  rows.forEach((row, index) => {
    row.cells[0].textContent = index + 1;
  });

  // Vymazat a vlo≈æit zpƒõt se≈ôazen√© ≈ô√°dky
  tbody.innerHTML = '';
  for(const row of rows) tbody.appendChild(row);

  // Aktualizovat datum posledn√≠ aktualizace
  const now = new Date();
  const dateStr = now.toLocaleString('cs-CZ', { dateStyle: 'short', timeStyle: 'short' });
  document.getElementById(type + 'UpdateDate').textContent = dateStr;
}

// Export do PDF (jednoduch√Ω, jen tabulka)
function exportTableToPDF(type) {
  alert(`Export do PDF funkce nen√≠ zat√≠m implementovan√°, ale p≈ô√≠kaz by mƒõl exportovat tabulku ${type}.`);
  // Zde m≈Ø≈æe≈° p≈ôidat implementaci exportu do PDF nap≈ô. s knihovnou jsPDF nebo reportlab na serveru
}

// Odemƒçen√≠ √∫prav Guild Info (p≈ôesn√© ≈ôe≈°en√≠ hesla nech√°v√°m na tobƒõ)
function requestEditAccess() {
  const pw = prompt('Zadej heslo pro √∫pravy:');
  if(pw === 'TopBanditi1') {
    const guildArea = document.getElementById('guildInfo');
    guildArea.readOnly = false;
    alert('√öpravy povoleny.');
  } else {
    alert('≈†patn√© heslo!');
  }
}
</script>

</body>
</html>
