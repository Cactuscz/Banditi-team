<head>
  <meta charset="UTF-8" />
  <title>Banditi - Team Stats</title>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

  <!-- Firebase SDK klasické -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>

  <script>
    // Inicializace Firebase - musí být hned po SDK
    const firebaseConfig = {
      apiKey: "AIzaSyDlWV1eFKgh-B8_D_7bDQqf1PwgJEgMRaY",
      authDomain: "banditi.firebaseapp.com",
      projectId: "banditi",
      storageBucket: "banditi.firebasestorage.app",
      messagingSenderId: "319931947074",
      appId: "1:319931947074:web:1c2687024644b731caf5db",
      measurementId: "G-9NJQ6Q8XXY"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>
</head>
<body>

  <!-- TVŮJ HTML KÓD ZDE -->

  <script>
    // Teď až tady napiš všechny funkce, které používají firebase a db
    async function firebaseLoadData() {
      const docRef = db.collection("banditi").doc("data");
      const snap = await docRef.get();
      if (snap.exists) {
        const data = snap.data();
        window.playersData = data.playersData || [];
        window.xpDataStorage = data.xpData || [];
        window.heroconDataStorage = data.heroconData || [];
        window.guildInfoText = data.guildInfoText || "";
      } else {
        window.playersData = [];
        window.xpDataStorage = [];
        window.heroconDataStorage = [];
        window.guildInfoText = "";
      }
    }

    async function firebaseSaveAll() {
      const docRef = db.collection("banditi").doc("data");
      await docRef.set({
        playersData: window.playersData,
        xpData: window.xpDataStorage,
        heroconData: window.heroconDataStorage,
        guildInfoText: document.getElementById('guildInfoText')?.value || ""
      });
    }

    // Ostatní funkce a inicializace webu

    async function init() {
      console.log("Inicializuji...");
      await firebaseLoadData();
      console.log("Data načtena:", window.playersData);
      renderPlayers();
      renderTournamentTable('xpBody', window.xpDataStorage);
      renderTournamentTable('heroconBody', window.heroconDataStorage);
      updateCharts();
      loadGuildInfo();
    }

    window.onload = init;
  </script>

</body>
