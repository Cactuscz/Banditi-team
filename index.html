<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>Banditi - Team Stats</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body {
    background-color: #1f1f2e;
    color: #f0f0f0;
    font-family: 'Segoe UI', sans-serif;
    padding: 20px;
  }
  .header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
    margin-bottom: 20px;
  }
  .header img {
    height: 60px;
    user-select: none;
  }
  .header h1 {
    color: #00ffc8;
    margin: 0;
    font-size: 2.2em;
  }
  .nav {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 25px;
  }
  .nav button {
    background-color: #00ffc8;
    color: #1f1f2e;
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
  }
  .nav button:hover {
    background-color: #00d1a8;
  }
  .section {
    display: none;
  }
  .section.active {
    display: block;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    background-color: #2a2a3d;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 0 15px rgba(0,0,0,0.5);
    margin-bottom: 30px;
  }
  th, td {
    padding: 12px 18px;
    text-align: center;
    border-bottom: 1px solid #3c3c50;
  }
  th {
    background-color: #34344a;
    color: #00ffc8;
    font-weight: bold;
  }
  tr:nth-child(even) {
    background-color: #262636;
  }
  tr:hover {
    background-color: #3a3a56;
  }
  td[contenteditable="true"] {
    cursor: text;
    background-color: #3a3a56;
  }
  .tables-container {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
  }
  .table-wrapper {
    flex: 1;
    min-width: 300px;
  }
  .chart-wrapper {
    flex: 1;
    min-width: 300px;
  }
  .update-info {
    font-size: 0.8em;
    color: #00ffc8;
    text-align: right;
    margin-bottom: 10px;
  }
  .limits {
    background-color: #2a2a3d;
    padding: 15px;
    border-radius: 10px;
    margin-bottom: 20px;
  }
  .limits h2 {
    color: #00ffc8;
    margin-top: 0;
  }
  .limits ul {
    columns: 2;
    padding-left: 20px;
  }
  .limits li {
    margin-bottom: 5px;
  }
  #guildInfo {
    width: 100%;
    min-height: 500px;
    background-color: #2a2a3d;
    color: #f0f0f0;
    border: 1px solid #3c3c50;
    border-radius: 10px;
    padding: 15px;
    font-family: 'Segoe UI', sans-serif;
    resize: vertical;
  }
  .edit-icon {
    cursor: pointer;
    color: #00ffc8;
    margin-left: 10px;
    font-size: 0.8em;
  }
  .add-player {
    background-color: #00ffc8;
    color: #1f1f2e;
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    margin-bottom: 20px;
  }
  .add-player:hover {
    background-color: #00d1a8;
  }
  .update-btn {
    background-color: #00ffc8;
    color: #1f1f2e;
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    margin-bottom: 10px;
  }
  .update-btn:hover {
    background-color: #00d1a8;
  }
  .positive {
    color: #00ff00;
  }
  .negative {
    color: #ff0000;
  }
  .workshop-status {
    font-weight: bold;
  }
  canvas {
    width: 100% !important;
    height: 400px !important;
  }
</style>
</head>
<body>

<div class="header">
  <img src="logo.png" alt="Logo">
  <h1>Banditi - Team Stats</h1>
</div>

<div class="nav">
  <button onclick="showSection('guild')">üè∞ Guild Info</button>
  <button onclick="showSection('players')">üë• Players Info</button>
  <button onclick="showSection('xp')">üìà XP Tournament</button>
  <button onclick="showSection('herocon')">‚öîÔ∏è HeroCon Tournament</button>
</div>

<div id="guild" class="section">
  <h2>Guild Info <span class="edit-icon" onclick="requestEditAccess()">‚úèÔ∏è</span></h2>
  <textarea id="guildInfo" readonly>
Casino: 

Casino with high quality rewards
2025-07-02 00:00:00 - 2025-07-05 23:59:59

"Chic Hero Hideout" Casino
2025-07-08 00:00:00 - 2025-07-13 23:59:59

Casino with high quality rewards
2025-07-18 00:00:00 - 2025-07-21 23:59:59

Casino without Coins or Experience Points, but with higher chance of all other prizes
2025-07-25 00:00:00 - 2025-07-28 23:59:59


Bonus Days:

Double Coins from Missions
2025-07-02 00:00:00 - 2025-07-05 23:59:59

Double Energy for Missions
2025-07-18 00:00:00 - 2025-07-21 23:59:59

Double Motivation Units
2025-07-26 00:00:00 - 2025-07-28 23:59:59


Events:

Summer Begins
2025-06-21 00:00:00 - 2025-09-21 23:59:59

Supervillain Lair: Dr. Wireless
2025-06-30 00:00:00 - 2025-07-05 23:59:59

Collection Event: The Secret Recipe
2025-07-01 00:00:00 - 2025-07-07 23:59:59

Lucky Pyramid: Country Livin'
2025-07-05 00:00:00 - 2025-07-07 23:59:59

Collection Event: The fiiinaaal! Wooohooooo!
2025-07-10 00:00:00 - 2025-07-13 23:59:59

Mole Hunt: Fire
2025-07-12 00:00:00 - 2025-07-14 23:59:59

Collection Event: The Solar Soapbox Derby
2025-07-14 00:00:00 - 2025-07-21 23:59:59

Mole Hunt: Retro Delights
2025-07-19 00:00:00 - 2025-07-22 23:59:59

Lucky Pyramid: Aliens
2025-07-22 00:00:00 - 2025-07-24 23:59:59

System Administrator Day
2025-07-25 00:00:00 - 2025-07-25 23:59:59

System Administrator Bonus Days
2025-07-26 00:00:00 - 2025-07-28 23:59:59

Collection Event: The International Hero Championships
2025-07-30 00:00:00 - 2025-08-06 23:59:59


HeroCons:

2025-07-03 21:00:00 Modifications produced at your Hero Hideout
2025-07-10 21:00:00 Attacks on villains
2025-07-17 21:00:00 Missions completed
2025-07-24 21:00:00 Special Missions Won


Villains:

2025-07-01 15:30:00 Nasty Burglar Duo
2025-07-02 06:00:00 The Joker
2025-07-02 19:45:00 Nasty Burglar Duo
2025-07-03 20:00:00 The Joker
2025-07-04 16:30:00 Boorish Rocker Rowdy
2025-07-05 07:45:00 Nasty Burglar Duo
2025-07-05 19:00:00 C3-D2
2025-07-06 14:00:00 Nasty Burglar Duo
2025-07-07 05:30:00 The Joker
2025-07-07 17:15:00 Nasty Burglar Duo
2025-07-08 13:00:00 Boorish Rocker Rowdy
2025-07-09 04:45:00 The Joker
2025-07-09 18:00:00 Nasty Burglar Duo
2025-07-10 12:30:00 The Joker
2025-07-11 03:15:00 Nasty Burglar Duo
2025-07-11 15:45:00 Boorish Rocker Rowdy
2025-07-12 09:00:00 The Joker
2025-07-12 21:30:00 Nasty Burglar Duo
2025-07-13 14:15:00 Boorish Rocker Rowdy
2025-07-14 08:00:00 The Joker
2025-07-14 20:30:00 Nasty Burglar Duo
2025-07-15 11:45:00 Boorish Rocker Rowdy
2025-07-16 05:00:00 The Joker
2025-07-16 17:30:00 Nasty Burglar Duo
2025-07-17 10:15:00 Boorish Rocker Rowdy
2025-07-18 02:45:00 The Joker
2025-07-18 15:15:00 Nasty Burglar Duo
2025-07-19 07:00:00 Boorish Rocker Rowdy
2025-07-19 19:30:00 The Joker
2025-07-20 13:15:00 Nasty Burglar Duo
2025-07-21 05:45:00 Boorish Rocker Rowdy
2025-07-21 18:15:00 The Joker
2025-07-22 11:00:00 Nasty Burglar Duo
2025-07-22 23:30:00 Boorish Rocker Rowdy
2025-07-23 16:00:00 The Joker
2025-07-24 06:30:00 Nasty Burglar Duo
2025-07-24 19:00:00 Boorish Rocker Rowdy
2025-07-25 12:45:00 The Joker
2025-07-26 04:15:00 Nasty Burglar Duo
2025-07-26 16:45:00 Boorish Rocker Rowdy
2025-07-27 09:30:00 The Joker
2025-07-27 22:00:00 Nasty Burglar Duo
2025-07-28 14:45:00 Boorish Rocker Rowdy
2025-07-29 07:15:00 The Joker
2025-07-29 19:45:00 Nasty Burglar Duo
2025-07-30 13:30:00 Boorish Rocker Rowdy
2025-07-31 06:00:00 The Joker
  </textarea>
</div>

<div id="players" class="section active">
  <button class="add-player" onclick="addPlayerRow('playersBody')">‚ûï P≈ôidat hr√°ƒçe</button>
  <table>
    <thead>
      <tr>
        <th>Jm√©no</th>
        <th>Level</th>
        <th>D√≠lna</th>
        <th>Status d√≠lny</th>
        <th>Missed</th>
      </tr>
    </thead>
    <tbody id="playersBody">
      <!-- ≈ò√°dky hr√°ƒç≈Ø budou zde -->
    </tbody>
  </table>
</div>

<div id="xp" class="section">
  <h2>XP Tournament</h2>
  <!-- Sem m≈Ø≈æe≈° p≈ôidat dal≈°√≠ obsah -->
</div>

<div id="herocon" class="section">
  <h2>HeroCon Tournament</h2>
  <!-- Sem m≈Ø≈æe≈° p≈ôidat dal≈°√≠ obsah -->
</div>

<script>
// --- Nastaven√≠ limit≈Ø d√≠lny podle levelu ---
const limits = [
    {level: 500, workshop: 20},
    {level: 450, workshop: 19},
    {level: 400, workshop: 18},
    {level: 350, workshop: 17},
    {level: 325, workshop: 16},
    {level: 300, workshop: 15},
    {level: 275, workshop: 14},
    {level: 250, workshop: 13},
    {level: 230, workshop: 12},
    {level: 210, workshop: 11},
    {level: 190, workshop: 10},
    {level: 170, workshop: 9},
    {level: 150, workshop: 8},
    {level: 100, workshop: 7}
];

// Funkce vrac√≠ maxim√°ln√≠ d√≠lnu podle levelu
function getMaxWorkshop(level) {
    level = parseInt(level);
    if (isNaN(level)) return 7;
    for (const limit of limits) {
        if (level >= limit.level) {
            return limit.workshop;
        }
    }
    return 7; // default
}

// Funkce vrac√≠ status d√≠lny - OK, +x, -x s barevn√Ωm znaƒçen√≠m
function getWorkshopStatus(level, workshop) {
    if (!level || !workshop) return "";
    const max = getMaxWorkshop(level);
    const diff = parseInt(workshop) - max;

    if (diff === 0) {
        return '<span class="workshop-status">OK</span>';
    } else if (diff > 0) {
        return `<span class="workshop-status positive">+${diff}</span>`;
    } else {
        return `<span class="workshop-status negative">${diff}</span>`;
    }
}

// Role ikony podle jm√©na (p≈ô√≠klad)
function getRoleIcon(name) {
    const commanders = ['Sazaro'];
    const officers = ['Alfa', 'Liones', 'Bandita', 'Blesk', 'Ranny', 'Loniz1337'];

    if (commanders.includes(name.trim())) {
        return '‚≠ê ';
    }
    if (officers.includes(name.trim())) {
        return 'üî∞ ';
    }
    return '';
}

let unlocked = true; // Umo≈æn√≠ editovat tabulku

function addPlayerRow(tableId, name = "", level = "", workshop = "", missed = "") {
    const tbody = document.getElementById(tableId);
    const row = document.createElement('tr');

    if (tableId === 'playersBody') {
        row.innerHTML = `
            <td contenteditable="${unlocked}">${getRoleIcon(name) + name}</td>
            <td contenteditable="${unlocked}">${level}</td>
            <td contenteditable="${unlocked}">${workshop}</td>
            <td>${getWorkshopStatus(level, workshop)}</td>
            <td contenteditable="${unlocked}">${missed}</td>
        `;

        const levelCell = row.cells[1];
        const workshopCell = row.cells[2];
        const statusCell = row.cells[3];

        // Aktualizuj status d√≠lny po zmƒõnƒõ levelu nebo workshopu
        const updateStatus = () => {
            statusCell.innerHTML = getWorkshopStatus(levelCell.textContent.trim(), workshopCell.textContent.trim());
        };

        levelCell.addEventListener('blur', updateStatus);
        workshopCell.addEventListener('blur', updateStatus);
    }

    tbody.appendChild(row);
}

// Uk√°zkov√≠ hr√°ƒçi pro start
const samplePlayers = [
    {name: 'Sazaro', level: 220, workshop: 11, missed: 0},
    {name: 'Alfa', level: 180, workshop: 9, missed: 1},
    {name: 'Liones', level: 320, workshop: 16, missed: 2},
    {name: 'Bandita', level: 150, workshop: 8, missed: 0},
    {name: 'Blesk', level: 400, workshop: 18, missed: 3},
    {name: 'Ranny', level: 270, workshop: 14, missed: 0},
    {name: 'Loniz1337', level: 190, workshop: 10, missed: 1}
];

// Naplnƒõn√≠ tabulky hr√°ƒçi p≈ôi naƒçten√≠ str√°nky
window.onload = () => {
    for (const p of samplePlayers) {
        addPlayerRow('playersBody', p.name, p.level, p.workshop, p.missed);
    }
};

function showSection(name) {
    document.querySelectorAll('.section').forEach(sec => {
        sec.classList.remove('active');
    });
    document.getElementById(name).classList.add('active');
}

function requestEditAccess() {
    alert("Pro √∫pravu textu Guild Info klikni dvakr√°t do pole.");
}

// Umo≈ænit editaci guild info textarea po dvojkliku
document.getElementById('guildInfo').addEventListener('dblclick', function() {
    this.removeAttribute('readonly');
    this.style.backgroundColor = '#3a3a56';
});

// Ulo≈æit text zpƒõt po ztr√°tƒõ focusu a zablokovat editaci
document.getElementById('guildInfo').addEventListener('blur', function() {
    this.setAttribute('readonly', true);
    this.style.backgroundColor = '#2a2a3d';
});
</script>

</body>
</html>
