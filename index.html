<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Banditi Team Stats</title>
<style>
:root {
    --main-bg: #1f1f2e;
    --card-bg: #2a2a3d;
    --header-bg: #34344a;
    --accent: #00ffc8;
    --hover-bg: #3a3a56;
}

body {
    background-color: var(--main-bg);
    color: #f0f0f0;
    font-family: 'Segoe UI', sans-serif;
    margin: 0;
    padding: 20px;
}

.header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
    margin-bottom: 20px;
}

.header img {
    height: 60px;
}

.header h1 {
    color: var(--accent);
    margin: 0;
    font-size: 2.2em;
}

.nav {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 25px;
    flex-wrap: wrap;
}

.nav button {
    background-color: var(--accent);
    color: var(--main-bg);
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    transition: 0.3s;
}

.nav button:hover {
    background-color: #00d1a8;
}

.container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
}

.card {
    background-color: var(--card-bg);
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(0,0,0,0.5);
    min-width: 300px;
    flex: 1;
}

h2 {
    color: var(--accent);
    margin-top: 0;
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 10px;
}

th, td {
    padding: 8px;
    text-align: center;
    border-bottom: 1px solid #3c3c50;
}

th {
    background-color: var(--header-bg);
    color: var(--accent);
}

tr:nth-child(even) {
    background-color: #262636;
}

tr:hover {
    background-color: var(--hover-bg);
}

td[contenteditable="true"] {
    background-color: var(--hover-bg);
    cursor: text;
}

textarea {
    width: 100%;
    min-height: 300px;
    background-color: var(--hover-bg);
    color: white;
    border: none;
    padding: 10px;
    border-radius: 8px;
}

.update-time {
    font-size: 0.9em;
    color: #bbb;
    text-align: right;
}
</style>
</head>

<body>

<div class="header">
    <img src="logo.png" alt="Logo">
    <h1>Banditi Team Stats</h1>
</div>

<div class="nav">
    <button onclick="show('guild')">üè∞ Guild Info</button>
    <button onclick="show('players')">üë• Players Info</button>
    <button onclick="show('xp')">üìà XP Tournament</button>
    <button onclick="show('herocon')">‚öîÔ∏è HeroCon Tournament</button>
</div>

<div id="content">

    <div id="guild" class="container section">
        <div class="card">
            <h2>Guild Info</h2>
            <textarea id="guildInfo"></textarea>
            <div class="update-time" id="guildTime"></div>
        </div>
    </div>

    <div id="players" class="container section">
        <div class="card">
            <h2>Players Info</h2>
            <table id="playersTable">
                <thead>
                    <tr>
                        <th>Nickname</th>
                        <th>Level</th>
                        <th>Workshop</th>
                        <th>Workshop Status</th>
                        <th>Vynechan√© boje</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <div class="update-time" id="playersTime"></div>
        </div>
    </div>

    <div id="xp" class="container section">
        <div class="card">
            <h2>XP Tournament</h2>
            <table id="xpTable">
                <thead>
                    <tr>
                        <th>Time</th>
                        <th>Rank</th>
                        <th>Name</th>
                        <th>XP Gained</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <div class="update-time" id="xpTime"></div>
        </div>
    </div>

    <div id="herocon" class="container section">
        <div class="card">
            <h2>HeroCon Tournament</h2>
            <table id="heroconTable">
                <thead>
                    <tr>
                        <th>Time</th>
                        <th>Rank</th>
                        <th>Name</th>
                        <th>HeroCon Gained</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <div class="update-time" id="heroconTime"></div>
        </div>
    </div>

</div>

<script>
const password = "TopBanditi1";
if (localStorage.getItem("unlocked") !== "true") {
    const input = prompt("Zadej heslo pro √∫pravu (jen pro editaci):");
    if (input === password) {
        localStorage.setItem("unlocked", "true");
        alert("‚úÖ P≈ô√≠stup povolen.");
    } else {
        alert("‚ùå ≈†patn√© heslo. Str√°nka je pouze pro ƒçten√≠.");
    }
}

function show(id) {
    document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
    document.getElementById(id).style.display = 'flex';
}
show('players');

function saveData(key, data) {
    localStorage.setItem(key, JSON.stringify(data));
    const time = new Date().toLocaleString();
    localStorage.setItem(key + "_time", time);
    document.getElementById(key + "Time").innerText = "Last updated: " + time;
}

function loadData(key) {
    const time = localStorage.getItem(key + "_time");
    if (time) document.getElementById(key + "Time").innerText = "Last updated: " + time;
    return JSON.parse(localStorage.getItem(key)) || [];
}

// ==== Guild Info ====
const guildTextarea = document.getElementById('guildInfo');
guildTextarea.value = loadData('guild') || '';
guildTextarea.addEventListener('input', () => saveData('guild', guildTextarea.value));

// ==== Players ====
const playersBody = document.querySelector('#playersTable tbody');
const playersData = loadData('players') || [
    ["‚≠ê Sazaro", 372, 17, "OK", 0],
    ["üî∞ Alfa", 482, 21, "OK", 0],
    ["üî∞ Liones", 359, 17, "OK", 0],
    ["üî∞ Bandita", 339, 16, "OK", 0],
    ["üî∞ Blesk", 331, 19, "OK", 0],
    ["üî∞ Ranny", 311, 17, "OK", 0],
    ["üî∞ Loniz1337", 301, 18, "OK", 0]
];

playersData.forEach(row => {
    const tr = document.createElement('tr');
    row.forEach(cell => {
        const td = document.createElement('td');
        td.contentEditable = localStorage.getItem("unlocked") === "true";
        td.innerText = cell;
        td.addEventListener('input', savePlayers);
        tr.appendChild(td);
    });
    playersBody.appendChild(tr);
});

function savePlayers() {
    const rows = [...playersBody.querySelectorAll('tr')].map(r =>
        [...r.querySelectorAll('td')].map(td => td.innerText)
    );
    saveData('players', rows);
}

// ==== XP ====
const xpBody = document.querySelector('#xpTable tbody');
const xpData = loadData('xp') || [
    ["2025-07-01", "1", "Alfa", "1230"]
];
xpData.forEach(row => {
    const tr = document.createElement('tr');
    row.forEach(cell => {
        const td = document.createElement('td');
        td.contentEditable = localStorage.getItem("unlocked") === "true";
        td.innerText = cell;
        td.addEventListener('input', saveXP);
        tr.appendChild(td);
    });
    xpBody.appendChild(tr);
});

function saveXP() {
    const rows = [...xpBody.querySelectorAll('tr')].map(r =>
        [...r.querySelectorAll('td')].map(td => td.innerText)
    );
    saveData('xp', rows);
}

// ==== HeroCon ====
const heroBody = document.querySelector('#heroconTable tbody');
const heroData = loadData('herocon') || [
    ["2025-07-01", "1", "Alfa", "540"]
];
heroData.forEach(row => {
    const tr = document.createElement('tr');
    row.forEach(cell => {
        const td = document.createElement('td');
        td.contentEditable = localStorage.getItem("unlocked") === "true";
        td.innerText = cell;
        td.addEventListener('input', saveHeroCon);
        tr.appendChild(td);
    });
    heroBody.appendChild(tr);
});

function saveHeroCon() {
    const rows = [...heroBody.querySelectorAll('tr')].map(r =>
        [...r.querySelectorAll('td')].map(td => td.innerText)
    );
    saveData('herocon', rows);
}

</script>

</body>
</html>
